## Project Sitemap

ğŸ“ src/
â”œâ”€â”€ ğŸ“ backend/
â”‚   â”œâ”€â”€ ğŸ“„ config.toml - Configuration for backend functions.
â”‚   â”œâ”€â”€ ğŸ“„ deno.jsonc - Deno configuration for backend functions.
â”‚   â””â”€â”€ ğŸ“ functions/
â”‚       â”œâ”€â”€ ğŸ“ _shared/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ cors.ts - Handles Cross-Origin Resource Sharing headers for backend functions.
â”‚       â”‚   â”œâ”€â”€ ğŸ“ lib/
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.ts - Shared constants for backend services.
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dns-provider-instructions.ts - Contains DNS setup instructions for different providers.
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ uuid-utils.ts - Utility functions for handling UUIDs.
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ uuid.ts - A library for UUID generation.
â”‚       â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ agentLogger.ts - Service for logging the steps of the AI agentic process.
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ differ.ts - Backend service for diffing email templates.
â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“„ htmlGenerator.ts - Backend service for generating HTML from email templates.
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ semanticParser.ts - Backend service for parsing semantic email content.
â”‚       â”‚   â””â”€â”€ ğŸ“„ supabaseAdmin.ts - Initializes the Supabase admin client for privileged operations.
â”‚       â”œâ”€â”€ ğŸ“ clarify-user-intent/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to handle the AI clarification conversation with the user.
â”‚       â”œâ”€â”€ ğŸ“ create-blog-post/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to create a new blog post.
â”‚       â”œâ”€â”€ ğŸ“ create-stripe-checkout-session/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to create a Stripe checkout session for subscriptions.
â”‚       â”œâ”€â”€ ğŸ“ generate-email-changes/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ index.ts - Main Supabase edge function that orchestrates the agentic process for generating email changes.
â”‚       â”‚   â””â”€â”€ ğŸ“ steps/
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ 1-clarify-intent.ts - First step of the agentic process: clarifying user intent.
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ 2-plan-changes.ts - Second step of the agentic process: creating a plan for changes.
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ 3-execute-plan.ts - Third step of the agentic process: executing the change plan.
â”‚       â”‚       â””â”€â”€ ğŸ“„ 4-generate-diff.ts - Fourth step of the agentic process: generating a diff of the changes.
â”‚       â”œâ”€â”€ ğŸ“ get-domain-provider/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ dns-lookup.ts - Helper for DNS lookups.
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ index.ts - Supabase edge function to detect the user's domain provider.
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ provider-map.ts - Maps nameservers to known DNS providers.
â”‚       â”‚   â””â”€â”€ ğŸ“„ types.ts - Types related to domain providers.
â”‚       â”œâ”€â”€ ğŸ“ get-or-create-tracking-id/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to get or create a tracking ID for a project.
â”‚       â”œâ”€â”€ ğŸ“„ import_map.json - Deno import map for backend functions.
â”‚       â”œâ”€â”€ ğŸ“ ingest-tracking-event/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to ingest tracking pixel events.
â”‚       â”œâ”€â”€ ğŸ“ initiate-email-setup/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to start the email setup process (e.g., creating DNS records).
â”‚       â”œâ”€â”€ ğŸ“ manage-pending-changes/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to accept or reject pending email changes.
â”‚       â”œâ”€â”€ ğŸ“ save-email-setup-form/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to save data from the email setup form.
â”‚       â”œâ”€â”€ ğŸ“ send-preview-email/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ deno.json - Deno configuration specific to the send-preview-email function.
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to send a preview email.
â”‚       â”œâ”€â”€ ğŸ“ stripe-webhook-handler/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ index.ts - Supabase edge function to handle incoming webhooks from Stripe.
â”‚       â”‚   â””â”€â”€ ğŸ“„ types.ts - Types for Stripe webhook payloads.
â”‚       â”œâ”€â”€ ğŸ“ subscribe-to-free-plan/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to subscribe a user to the free plan.
â”‚       â”œâ”€â”€ ğŸ“ test-pixel-status/
â”‚       â”‚   â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to test the status of the tracking pixel.
â”‚       â””â”€â”€ ğŸ“ verify-dns-records/
â”‚           â””â”€â”€ ğŸ“„ index.ts - Supabase edge function to verify a domain's DNS records.
â”œâ”€â”€ ğŸ“ components/
â”‚   â”œâ”€â”€ ğŸ“„ ChatInterface.tsx - The main chat component for user interaction with the AI.
â”‚   â”œâ”€â”€ ğŸ“„ DnsConfigurationModal.tsx - Modal dialog for displaying DNS configuration instructions.
â”‚   â”œâ”€â”€ ğŸ“„ EmailHtmlRenderer.tsx - Renders email HTML content within a sandboxed iframe.
â”‚   â”œâ”€â”€ ğŸ“„ EmailPreview.tsx - Component for previewing emails, including overlays for changes and selections.
â”‚   â”œâ”€â”€ ğŸ“„ Footer.tsx - The application's footer component.
â”‚   â”œâ”€â”€ ğŸ“„ GlobalDnsNotificationBar.tsx - A notification bar for global DNS status.
â”‚   â”œâ”€â”€ ğŸ“„ LoadingScreen.tsx - A full-screen loading indicator.
â”‚   â”œâ”€â”€ ğŸ“„ ManualEditPanel.tsx - Panel for manually editing the properties of a selected email element.
â”‚   â”œâ”€â”€ ğŸ“„ Navbar.tsx - The main navigation bar for the application.
â”‚   â”œâ”€â”€ ğŸ“ editor/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ EditorHeader.tsx - The header component for the email editor page.
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ EmailPreviewControls.tsx - Controls for the email preview (e.g., mobile/desktop view).
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ EmailPreviewPanel.tsx - The panel that contains the email preview and its controls.
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ InitialPromptScreen.tsx - The screen shown before the user has sent any messages.
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LoadingScreen.tsx - A loading screen specific to the editor.
â”‚   â”‚   â””â”€â”€ ğŸ“„ PendingChangesBar.tsx - The bar that displays pending changes and allows accepting/rejecting them.
â”‚   â”œâ”€â”€ ğŸ“ subscription/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PlanSelectionPage.tsx - A page where users can select a subscription plan.
â”‚   â”‚   â””â”€â”€ ğŸ“„ SubscriptionProtectedRoute.tsx - A higher-order component to protect subscription-only routes.
â”‚   â””â”€â”€ ğŸ“ ui/ - Contains reusable UI components from shadcn/ui.
â”œâ”€â”€ ğŸ“ contexts/
â”‚   â”œâ”€â”€ ğŸ“„ DnsStatusContext.tsx - React context for managing global DNS status.
â”‚   â””â”€â”€ ğŸ“„ LoadingContext.tsx - React context for managing the global loading screen.
â”œâ”€â”€ ğŸ“ core/
â”‚   â”œâ”€â”€ ğŸ“„ App.css - Main CSS file for the application.
â”‚   â”œâ”€â”€ ğŸ“„ App.tsx - The root component of the application, handles routing and providers.
â”‚   â”œâ”€â”€ ğŸ“„ constants.ts - Application-wide constants.
â”‚   â”œâ”€â”€ ğŸ“„ emailCampaigns.ts - Defines the available email campaigns for selection.
â”‚   â”œâ”€â”€ ğŸ“„ index.css - Global CSS styles and Tailwind setup.
â”‚   â”œâ”€â”€ ğŸ“„ main.tsx - The main entry point of the React application.
â”‚   â””â”€â”€ ğŸ“„ vite-env.d.ts - TypeScript declarations for Vite environment variables.
â”œâ”€â”€ ğŸ“ features/
â”‚   â”œâ”€â”€ ğŸ“ auth/
â”‚   â”‚   â””â”€â”€ ğŸ“„ useAuth.tsx - Hook for accessing authentication state and methods.
â”‚   â”œâ”€â”€ ğŸ“ contexts/
â”‚   â”‚   â””â”€â”€ ğŸ“ providers/
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ AIProvider.tsx - Manages all state related to AI chat interactions.
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ ChangesProvider.tsx - Manages the state of pending changes.
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ ManualEditProvider.tsx - Manages state for the manual editing panel.
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ ProjectProvider.tsx - Manages loading and saving the core project data.
â”‚   â”‚       â””â”€â”€ ğŸ“„ UIStateProvider.tsx - Manages global UI state (loading, view modes, etc.).
â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ differ.ts - Frontend service for diffing email templates.
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ htmlGenerator.ts - Frontend service for generating HTML from email templates.
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ projectService.ts - Service for fetching and updating project data.
â”‚   â”‚   â””â”€â”€ ğŸ“„ semanticParser.ts - Frontend service for parsing semantic email content.
â”‚   â”œâ”€â”€ ğŸ“ types/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ai.ts - Types related to AI interactions.
â”‚   â”‚   â””â”€â”€ ğŸ“„ index.ts - Main export file for feature types.
â”‚   â””â”€â”€ ğŸ“ utils/
â”‚       â””â”€â”€ ğŸ“„ placeholderUtils.ts - Utility functions related to placeholders.
â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”œâ”€â”€ ğŸ“„ use-mobile.tsx - Hook to detect if the user is on a mobile device.
â”‚   â””â”€â”€ ğŸ“„ use-toast.ts - Hook for using the toast notification system.
â”œâ”€â”€ ğŸ“ integrations/
â”‚   â””â”€â”€ ğŸ“ supabase/
â”‚       â”œâ”€â”€ ğŸ“„ client.ts - Initializes the Supabase client.
â”‚       â””â”€â”€ ğŸ“„ types.ts - TypeScript types generated from the Supabase schema.
â”œâ”€â”€ ğŸ“ lib/
â”‚   â”œâ”€â”€ ğŸ“„ utils.ts - General utility functions, including from shadcn/ui.
â”‚   â”œâ”€â”€ ğŸ“„ uuid-utils.ts - Shared utility functions for handling UUIDs.
â”‚   â””â”€â”€ ğŸ“„ uuid.ts - A library for UUID generation.
â”œâ”€â”€ ğŸ“ pages/
â”‚   â”œâ”€â”€ ğŸ“„ AuthGatePage.tsx - A page that forces guest users to sign up or log in.
â”‚   â”œâ”€â”€ ğŸ“„ BlogIndexPage.tsx - Page to display a list of blog posts.
â”‚   â”œâ”€â”€ ğŸ“„ BlogPostPage.tsx - Page to display a single blog post.
â”‚   â”œâ”€â”€ ğŸ“„ BusinessClarificationPage.tsx - A step in the onboarding flow for clarifying business details.
â”‚   â”œâ”€â”€ ğŸ“„ BusinessOverviewPage.tsx - A step in the onboarding flow to get the business overview.
â”‚   â”œâ”€â”€ ğŸ“„ Dashboard.tsx - The main dashboard page for authenticated users.
â”‚   â”œâ”€â”€ ğŸ“„ DnsConfirmationPage.tsx - A step in the onboarding flow for DNS confirmation.
â”‚   â”œâ”€â”€ ğŸ“„ Editor.tsx - The main email editor page.
â”‚   â”œâ”€â”€ ğŸ“„ GoalsFormPage.tsx - A step in the onboarding flow to define user goals.
â”‚   â”œâ”€â”€ ğŸ“„ Index.tsx - The main landing page of the application.
â”‚   â”œâ”€â”€ ğŸ“„ InfoClarificationPage.tsx - A step in the onboarding flow to review entered information.
â”‚   â”œâ”€â”€ ğŸ“„ Login.tsx - The user login page.
â”‚   â”œâ”€â”€ ğŸ“„ NotFound.tsx - The 404 not found page.
â”‚   â”œâ”€â”€ ğŸ“„ OptionalSignUpPage.tsx - A step in the onboarding flow with an optional sign-up.
â”‚   â”œâ”€â”€ ğŸ“„ PrivacyPolicy.tsx - The privacy policy page.
â”‚   â”œâ”€â”€ ğŸ“„ SelectEmailsPage.tsx - A step in the onboarding flow to select email campaigns.
â”‚   â”œâ”€â”€ ğŸ“„ SendEmailPage.tsx - A page for sending emails.
â”‚   â”œâ”€â”€ ğŸ“„ Signup.tsx - The user signup page.
â”‚   â”œâ”€â”€ ğŸ“„ TermsOfService.tsx - The terms of service page.
â”‚   â”œâ”€â”€ ğŸ“„ WebsiteStatusPage.tsx - A step in the onboarding flow to check website status.
â”‚   â””â”€â”€ ğŸ“„ WebsiteTrackingPage.tsx - A step in the onboarding flow for setting up website tracking.
â”œâ”€â”€ ğŸ“ shared/
â”‚   â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â””â”€â”€ ğŸ“„ stripe.ts - Configuration for Stripe.
â”‚   â”œâ”€â”€ ğŸ“ lib/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ uuid-utils.ts - Shared utility functions for handling UUIDs.
â”‚   â”‚   â””â”€â”€ ğŸ“„ uuid.ts - A library for UUID generation.
â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ differ.ts - Core service for diffing email templates.
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ htmlGenerator.ts - Core service for generating HTML from email templates.
â”‚   â”‚   â””â”€â”€ ğŸ“„ semanticParser.ts - Core service for parsing semantic email content.
â”‚   â””â”€â”€ ğŸ“ types/
â”‚       â”œâ”€â”€ ğŸ“„ blog.ts - Types for blog-related data structures.
â”‚       â”œâ”€â”€ ğŸ“„ column.ts - Type definition for a Column in the grid system.
â”‚       â”œâ”€â”€ ğŸ“„ common.ts - Common types shared across the application.
â”‚       â”œâ”€â”€ ğŸ“ config/
â”‚       â”‚   â””â”€â”€ ğŸ“„ elementDefaults.ts - Default values for new email elements.
â”‚       â”œâ”€â”€ ğŸ“„ diffs.ts - Types for diff objects.
â”‚       â”œâ”€â”€ ğŸ“„ editor.ts - Types specific to the editor state and functionality.
â”‚       â”œâ”€â”€ ğŸ“„ elements.ts - Type definitions for different Email Elements (e.g., Text, Image).
â”‚       â”œâ”€â”€ ğŸ“„ index.ts - Main export file for shared types.
â”‚       â”œâ”€â”€ ğŸ“„ pendingChangeTypes.ts - Types for pending changes.
â”‚       â”œâ”€â”€ ğŸ“„ row.ts - Type definition for a Row in the grid system.
â”‚       â”œâ”€â”€ ğŸ“„ sections.ts - Type definition for a Section in the grid system.
â”‚       â”œâ”€â”€ ğŸ“„ styled-jsx.d.ts - Type definitions for styled-jsx.
â”‚       â”œâ”€â”€ ğŸ“„ template.ts - Type definition for the main EmailTemplate structure.
â”‚       â””â”€â”€ ğŸ“„ validators.ts - Zod validators for data structures.
â””â”€â”€ ğŸ“ types/ - Global or ambient type definitions.
